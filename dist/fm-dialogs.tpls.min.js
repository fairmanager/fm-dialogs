!function(){"use strict";function a(){function a(a,b,c){this.$uibModal=a,this.strings=b,this.analyzer=c}var c,d=this;d.$get=["$uibModal","fmDialogsStrings","fmErrorAnalyzer",function(b,d,e){return c||(c=new a(b,d,e)),c}],d.$get.$inject=["$uibModal","fmDialogsStrings","fmErrorAnalyzer"],d.translate=function(a){angular.copy(a,k)},a.prototype.translate=d.translate,a.prototype.alert=function(a,c,d){"object"==typeof c&&(d=c,c=void 0),d=d||{};var e=this.$uibModal.open(b("alert.html","fmAlertController",{body:h(a),title:h(c),close:h(d.close||this.strings.close)}));return e.result.modal=e,e.result},a.prototype.confirm=function(a,c,d){"object"==typeof c&&(d=c,c=void 0),d=d||{};var e=this.$uibModal.open(b("confirm.html","fmConfirmController",{body:h(a),title:h(c),confirm:h(d.confirm||this.strings.confirm),cancel:h(d.cancel||this.strings.cancel)}));return e.result.modal=e,e.result},a.prototype.pick=function(a,c,d){"object"==typeof a&&(d=a,a=void 0),"object"==typeof c&&(d=c,c=void 0),d||(d=[{label:this.strings.cancel}]);var e=this.$uibModal.open(b("pick.html","fmPickController",{body:h(a),title:h(c),options:h(d)}));return e.result.modal=e,e.result},a.prototype.error=function(a,c,d,e){"object"==typeof c&&(e=c,c=void 0),"object"==typeof d&&(e=d,d=void 0),e=e||{};var f=this.analyzer.analyze(a),g=this.$uibModal.open(b("error.html","fmErrorController",{errors:h(f),body:h(c||this.strings.errorMessage),title:h(d),close:h(e.close||this.strings.close)}));return g.result.modal=g,g.result},a.prototype.notify=a.prototype.alert,a.prototype.wait=function(a,c,d){"object"==typeof a&&(d=a,a=void 0),"object"==typeof c&&(d=c,c=void 0),d=d||{};var e=b("wait.html","fmWaitController",{body:h(a||this.strings.pleaseWaitMessage),title:h(c),close:h(d.close||this.strings.close),cancel:h(d.cancel||this.strings.cancel),options:h(d)});e.keyboard=d.cancelable;var f=this.$uibModal.open(e);return f.result.modal=f,f.result.options=d,f.result.update=function(a,b){d.progrss=a,d.status=b},f.result.close=function(){f.close()},f.result}}function b(a,b,c){return{templateUrl:a,controller:b,controllerAs:"vm",bindToController:!0,backdrop:"static",resolve:c}}function c(a,b,c,d){this.$uibModalInstance=a,this.body=b,this.title=c,this.closeLabel=d}function d(a,b,c,d,e){this.$uibModalInstance=a,this.body=b,this.title=c,this.confirmLabel=d,this.cancelLabel=e}function e(a,b,c,d){this.$uibModalInstance=a,this.body=b,this.title=c,this.options=d}function f(a,b,c,d,e){this.$uibModalInstance=a,this.body=b,this.title=c,this.errors=e,this.closeLabel=d}function g(a,b,c,d,e,f,g){var h=this;h.$uibModalInstance=a,h.body=c,h.title=d,h.closeLabel=e,h.cancelLabel=f,h.options=g,h.hasProgress=g.progress||0===g.progress,b.$watch("vm.options.finished",function(b){b&&g.autoClose&&a.close()}),b.$watch("vm.options.status",function(a){a&&(h.body=a)})}function h(a){return function(){return a}}function i(a){return function(b){return a.trustAsHtml(b)}}function j(a){return function(b,c,d){b.$watch(d.fmAutoFocus,function(b){b&&a(function(){c[0].focus()},200)},!0)}}c.$inject=["$uibModalInstance","body","title","close"],d.$inject=["$uibModalInstance","body","title","confirm","cancel"],e.$inject=["$uibModalInstance","body","title","options"],f.$inject=["$uibModalInstance","body","title","close","errors"],g.$inject=["$uibModalInstance","$scope","body","title","close","cancel","options"],i.$inject=["$sce"],j.$inject=["$timeout"],angular.module("fmDialogs",["fmErrorAnalyzer","ui.bootstrap"]);var k={errorMessage:"An error has occurred.",pleaseWaitMessage:"Waiting on operation to complete.",close:"Close",confirm:"Confirm",cancel:"Cancel"};angular.module("fmDialogs").provider("fmDialogs",a).controller("fmAlertController",c).controller("fmConfirmController",d).controller("fmPickController",e).controller("fmErrorController",f).controller("fmWaitController",g).filter("fmHtml",i).value("fmDialogsStrings",k).directive("fmAutoFocus",j),c.prototype.close=function(){this.$uibModalInstance.close()},d.prototype.cancel=function(){this.$uibModalInstance.dismiss()},d.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.prototype.pick=function(a){this.$uibModalInstance.close(a)},f.prototype.close=function(){this.$uibModalInstance.close()},g.prototype.cancel=function(){this.$uibModalInstance.dismiss()},g.prototype.close=function(){this.$uibModalInstance.close()}}(),angular.module("fmDialogs").run(["$templateCache",function(a){a.put("alert.html",'<div class="modal-header" ng-if="vm.title"><button type="button" class="close" aria-hidden="true" ng-click="vm.close()">&times;</button><h4 class="modal-title">{{vm.title}}</h4></div><div class="modal-body"><p ng-bind-html="vm.body | fmHtml"></p></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="vm.close()">{{vm.closeLabel}}</button></div>'),a.put("confirm.html",'<div class="modal-header" ng-if="vm.title"><button type="button" class="close" aria-hidden="true" ng-click="vm.cancel()">&times;</button><h4 class="modal-title">{{vm.title}}</h4></div><div class="modal-body"><p ng-bind-html="vm.body | fmHtml"></p></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="vm.confirm()">{{vm.confirmLabel}}</button> <button type="button" class="btn btn-primary" ng-click="vm.cancel()">{{vm.cancelLabel}}</button></div>'),a.put("error.html",'<div class="modal-header" ng-if="vm.title"><button type="button" class="close" aria-hidden="true" ng-click="vm.close()">&times;</button><h4 class="modal-title">{{vm.title}}</h4></div><div class="modal-body"><p ng-bind-html="vm.body | fmHtml"></p><b class="text-danger" ng-if="vm.errors.length">{{vm.errors[0].message}}</b><p ng-if="1 <= vm.errors.length"><span ng-repeat="error in vm.errors" ng-if="$index > 0">{{error.message}}<br></span></p></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="vm.close()">{{vm.closeLabel}}</button></div>'),a.put("pick.html",'<div class="modal-header" ng-if="vm.title"><button type="button" class="close" aria-hidden="true" ng-click="vm.cancel()">&times;</button><h4 class="modal-title">{{vm.title}}</h4></div><div class="modal-body"><p ng-bind-html="vm.body | fmHtml"></p></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-repeat="option in vm.options" ng-class="option.class" ng-click="vm.pick( option )" fm-auto-focus="option.autofocus">{{option.label}}</button></div>'),a.put("wait.html",'<div class="modal-header" ng-if="vm.title"><button type="button" class="close" aria-hidden="true" ng-click="vm.close()" ng-show="vm.options.finished && !vm.options.autoClose">&times;</button><h4 class="modal-title">{{vm.title}}</h4></div><div class="modal-body"><p ng-bind-html="vm.body | fmHtml"></p><uib-progressbar value="vm.options.progress" animate="true" ng-show="vm.hasProgress"></uib-progressbar><uib-progressbar class="progress-striped active" ng-hide="vm.hasProgress || vm.options.finished"></uib-progressbar></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="vm.cancel()" ng-show="vm.options.cancelable && !vm.options.finished">{{vm.cancelLabel}}</button> <button type="button" class="btn btn-primary" ng-click="vm.close()" ng-show="vm.options.finished && !vm.options.autoClose">{{vm.closeLabel}}</button></div>')}]);